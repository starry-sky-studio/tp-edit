@layer utilities {
  .ProseMirror .tableWrapper {
    @apply my-2;
    overflow-x: auto;
    overflow-y: visible !important;
    position: relative !important;
  }

  .ProseMirror table {
    margin-top: 8px !important;
    margin-left: 8px !important;
    @apply box-border w-max table-fixed border-collapse rounded border border-black/10;
  }

  /* 统一行高，纵向合并 (rowspan) 时高度为各行之和 */
  .ProseMirror table tr {
    @apply h-10; /* 40px 行高，可按需调整 */
  }

  /* 固定列宽到 col，合并单元格时宽度为列宽之和 */
  .ProseMirror table col {
    @apply w-[200px];
  }

  .ProseMirror table td,
  .ProseMirror table th {
    @apply !relative border border-black/10 p-2 text-left align-top;
  }

  /* 进入/聚焦单元格时，移除段落默认外边距，避免行高被撑大 */
  .ProseMirror table td p,
  .ProseMirror table th p {
    @apply m-0;
  }
  .ProseMirror table td p:first-child,
  .ProseMirror table th p:first-child,
  .ProseMirror table td p:last-child,
  .ProseMirror table th p:last-child {
    @apply m-0;
  }

  .ProseMirror table .column-resize-handle {
    @apply pointer-events-none absolute top-0 -right-1 -bottom-[2px] flex w-1 bg-[#adf];
  }

  .resize-cursor {
    @apply cursor-ew-resize;
  }

  .ProseMirror table .selectedCell {
    @apply relative;
  }

  .ProseMirror table .selectedCell:after {
    content: '';
    @apply pointer-events-none absolute inset-0 z-[2] bg-[#c9d7f5] opacity-20 shadow-[inset_0_0_0_1px_#c9d7f5];
  }

  /*

  .dark .ProseMirror table {
    @apply border-white/20;
  }



  .dark .ProseMirror table td,
  .dark .ProseMirror table th {
    @apply border-white/20;
  }

  .ProseMirror table th {
    @apply font-bold;
  }

  .ProseMirror table td:first-of-type:not(a) {
    @apply mt-0;
  }

  .ProseMirror table td p {
    @apply m-0;
  }

  .ProseMirror table td p + p {
    @apply mt-3;
  }



  .dark .ProseMirror table .column-resize-handle::before {
    @apply bg-white/20;
  }

  .ProseMirror table .selectedCell {
    @apply border-double border-black/20 bg-black/5;
  }

  .dark .ProseMirror table .selectedCell {
    @apply border-white/20 bg-white/10;
  }

  .ProseMirror table .grip-column,
  .ProseMirror table .grip-row {
    @apply absolute z-[1] flex cursor-pointer items-center justify-center bg-black/5;
  }

  .dark .ProseMirror table .grip-column,
  .dark .ProseMirror table .grip-row {
    @apply bg-white/10;
  }

  .ProseMirror table .grip-column {
    @apply -top-3 left-0 -ml-[1px] h-3 w-[calc(100%+1px)] border-l border-black/20;
  }

  .dark .ProseMirror table .grip-column {
    @apply border-white/20;
  }

  .ProseMirror table .grip-column:hover {
    @apply bg-black/10;
  }

  .dark .ProseMirror table .grip-column:hover {
    @apply bg-white/20;
  }

  .ProseMirror table .grip-column:hover::before {
    content: '';
    @apply w-2.5 border-b-2 border-dotted border-black/60;
  }

  .dark .ProseMirror table .grip-column:hover::before {
    @apply border-white/60;
  }

  .ProseMirror table .grip-column.selected {
    @apply border-black/30 bg-black/30 shadow-sm;
  }

  .dark .ProseMirror table .grip-column.selected {
    @apply border-white/30 bg-white/30;
  }

  .ProseMirror table .grip-column.selected::before {
    content: '';
    @apply border-b-2 border-dotted;
  }

  .ProseMirror table .grip-column.first {
    @apply rounded-tl-sm border-transparent;
  }

  .ProseMirror table .grip-column.last {
    @apply rounded-tr-sm;
  }

  .ProseMirror table .grip-row {
    @apply top-0 -left-3 -mt-[1px] h-[calc(100%+1px)] w-3 border-t border-black/20;
  }

  .dark .ProseMirror table .grip-row {
    @apply border-white/20;
  }

  .ProseMirror table .grip-row:hover {
    @apply bg-black/10;
  }

  .dark .ProseMirror table .grip-row:hover {
    @apply bg-white/20;
  }

  .ProseMirror table .grip-row:hover::before {
    content: '';
    @apply h-2.5 border-l-2 border-dotted border-black/60;
  }

  .dark .ProseMirror table .grip-row:hover::before {
    @apply border-white/60;
  }

  .ProseMirror table .grip-row.selected {
    @apply border-black/30 bg-black/30 shadow-sm;
  }

  .dark .ProseMirror table .grip-row.selected {
    @apply border-white/30 bg-white/30;
  }

  .ProseMirror table .grip-row.selected::before {
    content: '';
    @apply border-l-2 border-dotted;
  }

  .ProseMirror table .grip-row.first {
    @apply rounded-tl-sm border-transparent;
  }

  .ProseMirror table .grip-row.last {
    @apply rounded-bl-sm;
  } */
}
